/*! Tablesaw - v0.1.6 - 2014-07-23
* https://github.com/filamentgroup/tablesaw
* Copyright (c) 2014 Filament Group; Licensed MIT */
;(function(b){var d=document.createElement("div"),a=d.getElementsByTagName("i"),c=b(document.documentElement);d.innerHTML="<!--[if lte IE 8]><i></i><![endif]-->";if(a[0]){c.addClass("ie-lte8")}if(!("querySelector" in document)||(window.blackberry&&!window.WebKitPoint)||window.operamini){return}else{c.addClass("tablesaw-enhanced");b(function(){b(document).trigger("enhance.tablesaw")})}})(jQuery);(function(g){var f="table",e={toolbar:"tablesaw-bar"},d={create:"tablesawcreate",destroy:"tablesawdestroy",refresh:"tablesawrefresh"},c="stack",b="table[data-mode],table[data-sortable]";var a=function(h){if(!h){throw new Error("Tablesaw requires an element.")}this.table=h;this.$table=g(h);this.mode=this.$table.attr("data-mode")||c;this.init()};a.prototype.init=function(){if(!this.$table.attr("id")){this.$table.attr("id",f+"-"+Math.round(Math.random()*10000))}this.createToolbar();var h=this._initCells();this.$table.trigger(d.create,[this.mode,h])};a.prototype._initCells=function(){var i,j=this.table.querySelectorAll("thead tr"),h=this;g(j).each(function(){var k=0;g(this).children().each(function(){var m=parseInt(this.getAttribute("colspan"),10),n=":nth-child("+(k+1)+")";i=k+1;if(m){for(var l=0;l<m-1;l++){k++;n+=", :nth-child("+(k+1)+")"}}this.cells=h.$table.find("tr").not(g(j).eq(0)).not(this).children(n);k++})});return i};a.prototype.refresh=function(){this._initCells();this.$table.trigger(d.refresh)};a.prototype.createToolbar=function(){var h=this.$table.prev("."+e.toolbar);if(!h.length){h=g("<div>").addClass(e.toolbar).insertBefore(this.$table)}this.$toolbar=h;if(this.mode){this.$toolbar.addClass("mode-"+this.mode)}};a.prototype.destroy=function(){this.$table.prev("."+e.toolbar).each(function(){this.className=this.className.replace(/\bmode\-\w*\b/gi,"")});g(window).off("resize."+this.$table.attr("id"));this.$table.trigger(d.destroy,[this.mode]);this.$table.removeAttr("data-mode");this.$table.removeData(f)};g.fn[f]=function(){return this.each(function(){var i=g(this);if(i.data(f)){return}var h=new a(this);i.data(f,h)})};g(document).on("enhance.tablesaw",function(h){g(h.target).find(b)[f]()})}(jQuery));(function(f,e,g){var b={stackTable:"tablesaw-stack",cellLabels:"tablesaw-cell-label"};var d={obj:"tablesaw-stack"};var a={labelless:"data-no-labels"};var c=function(h){this.$table=e(h);this.labelless=this.$table.is("["+a.labelless+"]");if(!this.labelless){this.allHeaders=this.$table.find("th")}this.$table.data(d.obj,this)};c.prototype.init=function(i){this.$table.addClass(b.stackTable);if(this.labelless){return}var h=e(this.allHeaders);h.each(function(){var j=e(this.cells),n=j.not(this).filter("thead th").length&&" tablesaw-cell-label-top",m=e(this).text();if(m!==""){if(n){var l=parseInt(e(this).attr("colspan"),10),k="";if(l){k="td:nth-child("+l+"n + "+(i)+")"}j.filter(k).prepend("<b class='"+b.cellLabels+n+"'>"+m+"</b>")}else{j.prepend("<b class='"+b.cellLabels+"'>"+m+"</b>")}}})};c.prototype.destroy=function(){this.$table.removeClass(b.stackTable);this.$table.find("."+b.cellLabels).remove()};e(document).on("tablesawcreate","table",function(j,k,h){if(k==="stack"){var i=new c(this);i.init(h)}});e(document).on("tablesawdestroy","table",function(h,i){if(i==="stack"){e(this).data(d.obj).destroy()}})}(this,jQuery));(function(d){var c="tablesawbtn",b=".btn",a={_create:function(){return d(this).each(function(){d(this).trigger("beforecreate."+c)[c]("_init").trigger("create."+c)})},_init:function(){var e=d(this),f=this.getElementsByTagName("select")[0];if(f){d(this).addClass("btn-select")[c]("_select",f)}return e},_select:function(e){var f=function(j,p){var o=d(p).find("option"),h,n,m;o.each(function(){var i=this;if(i.selected){h=document.createTextNode(i.text)}});m=j.childNodes;if(o.length>0){for(var k=0,g=m.length;k<g;k++){n=m[k];if(n&&n.nodeType===3){j.replaceChild(h,n)}}}};f(this,e);d(this).bind("change refresh",function(){f(this,e)})}};d.fn[c]=function(g,f,e,h){return this.each(function(){if(g&&typeof(g)==="string"){return d.fn[c].prototype[g].call(this,f,e,h)}if(d(this).data(c+"active")){return d(this)}d(this).data(c+"active",true);d.fn[c].prototype._create.call(this)})};d.extend(d.fn[c].prototype,a);d(document).on("enhance",function(f){d(b,f.target)[c]()})}(jQuery));(function(c,a,d){var b=function(e){this.$table=a(e);this.classes={columnToggleTable:"tablesaw-columntoggle",columnBtnContain:"tablesaw-columntoggle-btnwrap tablesaw-advance",dialogClass:this.$table.attr("data-dialog-class")||"",columnBtn:"tablesaw-columntoggle-btn tablesaw-nav-btn",columnBtnSide:this.$table.attr("data-column-btn-side")||"right",popup:"tablesaw-columntoggle-popup",priorityPrefix:"tablesaw-priority-",toolbar:"tablesaw-bar"};this.i18n={columnBtnText:"Columns",columnsDialogError:"No eligible columns."};this.headers=this.$table.find("tr:first > th");this.$table.data("tablesaw-coltoggle",this)};b.prototype.init=function(){var i,l,f,k,g,h,e=this;this.$table.addClass(this.classes.columnToggleTable);i=this.$table.attr("id");l=i+"-popup";h=a("<div class='"+this.classes.columnBtnContain+" "+this.classes.columnBtnSide+" "+this.classes.dialogClass+"'></div>");f=a("<a href='#"+l+"' class='btn btn-micro "+this.classes.columnBtn+"' data-popup-link><span>"+this.i18n.columnBtnText+"</span></a>");k=a("<div class='dialog-table-coltoggle "+this.classes.popup+"' id='"+l+"'></div>");g=a("<div class='btn-group'></div>");var j=false;a(this.headers).not("td").each(function(){var o=a(this),n=o.attr("data-priority"),m=o.add(this.cells);if(n&&n!=="persist"){m.addClass(e.classes.priorityPrefix+n);a("<label><input type='checkbox' checked>"+o.text()+"</label>").appendTo(g).children(0).data("cells",m);j=true}});if(!j){g.append("<label>"+this.i18n.columnsDialogError+"</label>")}g.appendTo(k);g.find('input[type="checkbox"]').on("change",function(n){var m=n.target.checked;a(n.target).data("cells").toggleClass("tablesaw-cell-hidden",!m).toggleClass("tablesaw-cell-visible",m);e.$table.trigger("tablesawcolumns")});f.appendTo(h);h.appendTo(this.$table.prev("."+this.classes.toolbar));k.appendTo(h).dialog(true);this.$menu=g;a(window).on("resize."+i,function(){e.refreshToggle()});this.refreshToggle()};b.prototype.refreshToggle=function(){this.$menu.find("input").each(function(){var e=a(this);this.checked=e.data("cells").eq(0).css("display")==="table-cell"})};b.prototype.refreshPriority=function(){var e=this;a(this.headers).not("td").each(function(){var h=a(this),g=h.attr("data-priority"),f=h.add(this.cells);if(g&&g!=="persist"){f.addClass(e.classes.priorityPrefix+g)}else{f.each(function(){this.className=this.className.replace(/\bui\-table\-priority\-\d\b/g,"")})}})};b.prototype.destroy=function(){this.$table.removeClass(this.classes.columnToggleTable);this.$table.find("th, td").each(function(){var e=a(this);e.removeClass("tablesaw-cell-hidden").removeClass("tablesaw-cell-visible");this.className=this.className.replace(/\bui\-table\-priority\-\d\b/g,"")})};a(document).on("tablesawcreate","table",function(g,h){if(h==="columntoggle"){var f=new b(this);f.init()}});a(document).on("tablesawdestroy","table",function(f,g){if(g==="columntoggle"){a(this).data("tablesaw-coltoggle").destroy()}})}(this,jQuery));(function(c,b,d){function a(l){var C=b("<div class='tablesaw-advance'></div>"),j=b("<a href='#' class='tablesaw-nav-btn btn btn-micro left' title='Previous Column'></a>").appendTo(C),t=b("<a href='#' class='tablesaw-nav-btn btn btn-micro right' title='Next Column'></a>").appendTo(C),e="disabled",B="tablesaw-fix-persist",w=l.find("thead th"),i=w.not('[data-priority="persist"]'),p=[],m=b(document.head||"head"),n=l.attr("id"),q=b("html").is(".ie-lte8");l.css("width","auto");w.each(function(){p.push(b(this).outerWidth())});l.css("width","");C.appendTo(l.prev(".tablesaw-bar"));l.addClass("tablesaw-swipe");if(!n){n="tableswipe-"+Math.round(Math.random()*10000);l.attr("id",n)}function A(D){return b(D.cells).add(D)}function x(D){A(D).removeClass("tablesaw-cell-hidden")}function f(D){A(D).addClass("tablesaw-cell-hidden")}function u(D){A(D).addClass("tablesaw-cell-persist")}function k(D){return b(D).is('[data-priority="persist"]')}function s(){l.removeClass(B);b("#"+n+"-persist").remove()}function z(){var F="#"+n+" ",E=[],D=l.width();w.each(function(G){var H;if(k(this)){H=b(this).outerWidth();if(H<D*0.75){E.push(F+" .tablesaw-cell-persist:nth-child("+(G+1)+") { width: "+H+"px; }")}}});s();l.addClass(B);m.append(b("<style>"+E.join("\n")+"</style>").attr("id",n+"-persist"))}function h(){var E=[],D;i.each(function(G){var H=b(this),F=H.css("display")==="none"||H.is(".tablesaw-cell-hidden");if(!F&&!D){D=true;E[0]=G}else{if(F&&D){E[1]=G;return false}}});return E}function g(){var D=h();return[D[1]-1,D[0]-1]}function y(D){return D?h():g()}function v(D){return D[1]>-1&&D[1]<i.length}function o(){var F=20,E=l.parent().width(),D=0;w.each(function(H){var I=b(this),G=I.is('[data-priority="persist"]');D+=p[H]+(G?0:F);if(G){u(this);return}if(D>E){f(this)}else{x(this)}});if(!q){s()}l.trigger("tablesawcolumns")}function r(D){var E=y(D);if(v(E)){if(isNaN(E[0])){if(D){E[0]=0}else{E[0]=i.length-1}}if(!q){z()}f(i.get(E[0]));x(i.get(E[1]));l.trigger("tablesawcolumns")}}j.add(t).click(function(D){r(!!b(D.target).closest(t).length);D.preventDefault()});l.bind("touchstart.swipetoggle",function(G){var F=(G.touches||G.originalEvent.touches)[0].pageX,E=(G.touches||G.originalEvent.touches)[0].pageY,D,H;b(this).bind("touchmove",function(I){D=(I.touches||I.originalEvent.touches)[0].pageX;H=(I.touches||I.originalEvent.touches)[0].pageY;if(Math.abs(D-F)>15&&Math.abs(H-E)<20){I.preventDefault()}}).bind("touchend.swipetoggle",function(){if(D-F<15){r(true)}if(D-F>-15){r(false)}b(this).unbind("touchmove touchend")})}).bind("tablesawcolumns.swipetoggle",function(){j[v(g())?"removeClass":"addClass"](e);t[v(h())?"removeClass":"addClass"](e)}).bind("tablesawnext.swipetoggle",function(){r(true)}).bind("tablesawprev.swipetoggle",function(){r(false)}).bind("tablesawdestroy.swipetoggle",function(){var D=b(this);D.removeClass("tablesaw-swipe");D.prev(".tablesaw-bar").find(".tablesaw-advance").remove();b(c).off("resize",o);D.unbind(".swipetoggle")});o();b(c).on("resize",o)}b(document).on("tablesawcreate","table",function(g,h){var f=b(this);if(h==="swipe"){a(f)}})}(this,jQuery));(function(d){function b(j){return d.map(j.childNodes,function(l){var k=d(l);if(k.is("input, select")){return k.val()}else{if(k.hasClass("tablesaw-cell-label")){return}}return d.trim(k.text())}).join("")}var g="tablesaw-sortable",f="sortable",e="table[data-"+f+"]",h="[data-"+f+"-switch]",c={head:f+"-head",ascend:f+"-ascending",descend:f+"-descending",switcher:g+"-switch",tableToolbar:"tablesaw-toolbar"},i={sort:"Sort"},a={_create:function(j){return d(this).each(function(){var k=d(this).data("init"+f);if(k){return false}d(this).data("init"+f,true).trigger("beforecreate."+f)[f]("_init",j).trigger("create."+f)})},_init:function(){var k=d(this),q,l;var n=function(){k.addClass(g)},m=function(t){d.each(t,function(w,u){d(u).addClass(c.head)})},p=function(u,t){d.each(u,function(y,x){var w=d("<button />");w.bind("click",{col:x},t);d(x).wrapInner(w)})},s=function(t){d.each(t,function(x,u){var w=d(u);w.removeAttr("data-sortable-default-col");w.removeClass(c.ascend);w.removeClass(c.descend)})},r=function(w){if(d(w.target).is("a[href]")){return}w.stopPropagation();var u=d(this).parent(),t=w.data.col,x=q.index(u);s(u.siblings());if(u.hasClass(c.descend)){k[f]("sortBy",t,true);x+="_asc"}else{k[f]("sortBy",t);x+="_desc"}if(l){l.find("select").val(x).trigger("refresh")}w.preventDefault()},j=function(t){d.each(t,function(u,w){var v=d(w);if(v.is("[data-sortable-default-col]")){if(!v.hasClass(c.descend)){v.addClass(c.ascend)}}})},o=function(u){l=d("<div>").addClass(c.switcher).addClass(c.tableToolbar).html(function(){var w=["<label>"+i.sort+":"];w.push('<span class="btn btn-small">&#160;<select>');u.each(function(y){var B=d(this),x=B.is("[data-sortable-default-col]"),z=B.hasClass(c.descend),A=false;d(this.cells).slice(0,3).each(function(){if(!isNaN(parseInt(b(this),10))){A=true;return false}});w.push("<option"+(x&&!z?" selected":"")+' value="'+y+'_asc">'+B.text()+" "+(A?"↑":"(A-Z)")+"</option>");w.push("<option"+(x&&z?" selected":"")+' value="'+y+'_desc">'+B.text()+" "+(A?"↓":"(Z-A)")+"</option>")});w.push("</select></span></label>");return w.join("")});var t=k.prev(".tablesaw-bar"),v=t.children().eq(0);if(v.length){l.insertBefore(v)}else{l.appendTo(t)}l.find(".btn").tablesawbtn();l.find("select").on("change",function(){var x=d(this).val().split("_"),w=u.eq(x[0]);s(w.siblings());k.sortable("sortBy",w.get(0),x[1]==="asc")})};n();q=k.find("thead th[data-"+f+"-col]");m(q);p(q,r);j(q);if(k.is(h)){o(q,k.find("tbody tr:nth-child(-n+3)"))}},getColumnNumber:function(j){return d(j).prevAll().length},getTableRows:function(){return d(this).find("tbody tr")},sortRows:function(s,j,l,k){var r,o,n;var m=function(u){var t=[];d.each(u,function(v,w){t.push({cell:b(d(w).children().get(j)),rowNum:v})});return t},p=function(u,w){var t,v=/[^\d\.]/g;if(u){t=function(y,x){if(w||!isNaN(parseFloat(y.cell))){return parseFloat(y.cell.replace(v,""))-parseFloat(x.cell.replace(v,""))}else{return y.cell.toLowerCase()>x.cell.toLowerCase()?1:-1}}}else{t=function(y,x){if(w||!isNaN(parseFloat(y.cell))){return parseFloat(x.cell.replace(v,""))-parseFloat(y.cell.replace(v,""))}else{return y.cell.toLowerCase()<x.cell.toLowerCase()?1:-1}}}return t},q=function(u,x){var w=[],v,t,y;for(v=0,t=u.length;v<t;v++){y=u[v].rowNum;w.push(x[y])}return w};r=m(s);o=p(l,d(k).is("[data-sortable-numeric]"));n=r.sort(o);s=q(n,s);return s},replaceTableRows:function(l){var k=d(this),j=k.find("tbody");j.html(l)},makeColDefault:function(k,j){var l=d(k);l.attr("data-sortable-default-col","true");if(j){l.removeClass(c.descend);l.addClass(c.ascend)}else{l.removeClass(c.ascend);l.addClass(c.descend)}},sortBy:function(k,m){var l=d(this),j,n;j=l[f]("getColumnNumber",k);n=l[f]("getTableRows");n=l[f]("sortRows",n,j,m,k);l[f]("replaceTableRows",n);l[f]("makeColDefault",k,m)}};d.fn[f]=function(k){var j=Array.prototype.slice.call(arguments,1),l;if(k&&typeof(k)==="string"){l=d.fn[f].prototype[k].apply(this[0],j);return(typeof l!=="undefined")?l:d(this)}if(!d(this).data(f+"data")){d(this).data(f+"active",true);d.fn[f].prototype._create.call(this,k)}return d(this)};d.extend(d.fn[f].prototype,a);d(document).on("tablesawcreate","table",function(){if(d(this).is(e)){d(this)[f]()}})}(jQuery));(function(c,b,d){var e={attr:{init:"data-minimap"}};function a(j){var i=b('<div class="tablesaw-advance minimap">'),l=b('<ul class="tablesaw-advance-dots">').appendTo(i),h="tablesaw-advance-dots-hide",k=j.find("thead th");k.each(function(){l.append("<li><i></i></li>")});i.appendTo(j.prev(".tablesaw-bar"));function f(m){var n=m.attr(e.attr.init);return !n||c.matchMedia&&c.matchMedia(n).matches}function g(){if(!f(j)){i.hide();return}i.show();var m=l.find("li").removeClass(h);j.find("thead th").each(function(n){if(b(this).css("display")==="none"){m.eq(n).addClass(h)}})}g();b(c).on("resize",g);j.bind("tablesawcolumns.minimap",function(){g()}).bind("tablesawdestroy.minimap",function(){var m=b(this);m.prev(".tablesaw-bar").find(".tablesaw-advance").remove();b(c).off("resize",g);m.unbind(".minimap")})}b(document).on("tablesawcreate","table",function(g,h){var f=b(this);if((h==="swipe"||h==="columntoggle")&&f.is("[ "+e.attr.init+"]")){a(f)}})}(this,jQuery));(function(c,b){var a={selectors:{init:"table[data-mode-switch]"},attributes:{excludeMode:"data-mode-exclude"},classes:{main:"tablesaw-modeswitch",toolbar:"tablesaw-toolbar"},modes:["stack","swipe","columntoggle"],i18n:{modes:["Stack","Swipe","Toggle"],columns:'Col<span class="a11y-sm">umn</span>s'},init:function(i){var e=b(i),j=e.attr(a.attributes.excludeMode),d=e.prev(".tablesaw-bar"),h="",f=b("<div>").addClass(a.classes.main+" "+a.classes.toolbar).html(function(){var o=["<label>"+a.i18n.columns+":"],p=e.attr("data-mode"),n;o.push('<span class="btn btn-small">&#160;<select>');for(var m=0,l=a.modes.length;m<l;m++){if(j&&j.toLowerCase()===a.modes[m]){continue}n=p===a.modes[m];if(n){h=a.modes[m]}o.push("<option"+(n?" selected":"")+' value="'+a.modes[m]+'">'+a.i18n.modes[m]+"</option>")}o.push("</select></span></label>");return o.join("")});var g=d.find(".tablesaw-advance").eq(0);if(g.length){f.insertBefore(g)}else{f.appendTo(d)}f.find(".btn").tablesawbtn();f.find("select").bind("change",a.onModeChange)},onModeChange:function(){var g=b(this),e=g.closest("."+a.classes.main),d=g.closest(".tablesaw-bar").nextUntil(d).eq(0),f=g.val();e.remove();d.data("table").destroy();d.attr("data-mode",f);d.table()}};b(c.document).on("tablesawcreate","table",function(){if(b(this).is(a.selectors.init)){a.init(this)}})})(this,jQuery);